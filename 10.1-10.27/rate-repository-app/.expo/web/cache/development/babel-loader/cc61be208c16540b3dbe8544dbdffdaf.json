{"ast":null,"code":"import { useQuery } from '@apollo/client';\nimport React from 'react';\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport RepositoryItem from \"./RepositoryItem\";\nimport { GET_SINGLE_REPOSITORY } from \"../../graphql/queries\";\nimport { useParams } from 'react-router-native';\nimport ReviewItem from \"./ReviewItem\";\nimport ItemSeparator from \"../ItemSeparator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar SingleRepo = function SingleRepo() {\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var _useQuery = useQuery(GET_SINGLE_REPOSITORY, {\n    fetchPolicy: 'cache-and-network',\n    variables: {\n      repositoryId: id\n    }\n  }),\n      data = _useQuery.data,\n      fetchMore = _useQuery.fetchMore,\n      loading = _useQuery.loading;\n\n  if (!data) {\n    return null;\n  }\n\n  var repoInfo = data.repository;\n  var repoReviews = repoInfo.reviews.edges.map(function (e) {\n    return e.node;\n  });\n\n  var handleOpenGithub = function handleOpenGithub() {\n    Linking.openURL(repoInfo.url);\n  };\n\n  var handleFetchMore = function handleFetchMore() {\n    if (!loading && repoInfo.pageInfo.hasNextPage) {\n      fetchMore({\n        variables: {\n          repositoryId: id,\n          after: repoInfo.pageInfo.endCursor\n        }\n      });\n    }\n  };\n\n  var repoItem = _jsx(RepositoryItem, {\n    item: repoInfo,\n    handleOpenGithub: handleOpenGithub,\n    singleView: true\n  });\n\n  return _jsx(FlatList, {\n    data: repoReviews,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return _jsx(ReviewItem, {\n        review: item\n      });\n    },\n    keyExtractor: function keyExtractor(_ref2) {\n      var id = _ref2.id;\n      return id;\n    },\n    ListHeaderComponent: repoItem,\n    ItemSeparatorComponent: ItemSeparator,\n    onEndReached: handleFetchMore,\n    onEndReachedThreshold: 0.1\n  });\n};\n\nexport default SingleRepo;","map":{"version":3,"sources":["/home/fuzzy-dunlop/Desktop/react-projects/rate-repository-app/src/components/RepositoryList/SingleRepo.jsx"],"names":["useQuery","React","RepositoryItem","GET_SINGLE_REPOSITORY","useParams","ReviewItem","ItemSeparator","SingleRepo","id","fetchPolicy","variables","repositoryId","data","fetchMore","loading","repoInfo","repository","repoReviews","reviews","edges","map","e","node","handleOpenGithub","Linking","openURL","url","handleFetchMore","pageInfo","hasNextPage","after","endCursor","repoItem","item"],"mappings":"AAAA,SAASA,QAAT,QAAyB,gBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,OAAOC,cAAP;AACA,SAASC,qBAAT;AACA,SAASC,SAAT,QAA0B,qBAA1B;AACA,OAAOC,UAAP;AACA,OAAOC,aAAP;;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AAExB,mBAAeH,SAAS,EAAxB;AAAA,MAAQI,EAAR,cAAQA,EAAR;;AAEA,kBAAqCR,QAAQ,CAACG,qBAAD,EAAwB;AACpEM,IAAAA,WAAW,EAAE,mBADuD;AAEpEC,IAAAA,SAAS,EAAE;AACVC,MAAAA,YAAY,EAAEH;AADJ;AAFyD,GAAxB,CAA7C;AAAA,MAAQI,IAAR,aAAQA,IAAR;AAAA,MAAcC,SAAd,aAAcA,SAAd;AAAA,MAAyBC,OAAzB,aAAyBA,OAAzB;;AAOA,MAAG,CAACF,IAAJ,EAAS;AACR,WAAO,IAAP;AACA;;AAED,MAAMG,QAAQ,GAAGH,IAAI,CAACI,UAAtB;AAEA,MAAMC,WAAW,GAAGF,QAAQ,CAACG,OAAT,CAAiBC,KAAjB,CAAuBC,GAAvB,CAA2B,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACC,IAAN;AAAA,GAA5B,CAApB;;AAEA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC9BC,IAAAA,OAAO,CAACC,OAAR,CAAgBV,QAAQ,CAACW,GAAzB;AACA,GAFD;;AAIA,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC7B,QAAG,CAACb,OAAD,IAAYC,QAAQ,CAACa,QAAT,CAAkBC,WAAjC,EAA6C;AAC5ChB,MAAAA,SAAS,CAAC;AACTH,QAAAA,SAAS,EAAE;AACVC,UAAAA,YAAY,EAAEH,EADJ;AAEVsB,UAAAA,KAAK,EAAEf,QAAQ,CAACa,QAAT,CAAkBG;AAFf;AADF,OAAD,CAAT;AAMA;AACD,GATD;;AAWA,MAAMC,QAAQ,GACb,KAAC,cAAD;AACC,IAAA,IAAI,EAAEjB,QADP;AAEC,IAAA,gBAAgB,EAAEQ,gBAFnB;AAGC,IAAA,UAAU;AAHX,IADD;;AASA,SACC,KAAC,QAAD;AACC,IAAA,IAAI,EAAEN,WADP;AAEC,IAAA,UAAU,EAAE;AAAA,UAAGgB,IAAH,QAAGA,IAAH;AAAA,aAAc,KAAC,UAAD;AAAY,QAAA,MAAM,EAAEA;AAApB,QAAd;AAAA,KAFb;AAGC,IAAA,YAAY,EAAE;AAAA,UAAGzB,EAAH,SAAGA,EAAH;AAAA,aAAYA,EAAZ;AAAA,KAHf;AAIC,IAAA,mBAAmB,EAAEwB,QAJtB;AAKC,IAAA,sBAAsB,EAAE1B,aALzB;AAMC,IAAA,YAAY,EAAEqB,eANf;AAOC,IAAA,qBAAqB,EAAE;AAPxB,IADD;AAYA,CAvDD;;AAyDA,eAAepB,UAAf","sourcesContent":["import { useQuery } from '@apollo/client'\nimport React from 'react'\nimport { Linking, FlatList } from 'react-native'\nimport RepositoryItem from './RepositoryItem'\nimport { GET_SINGLE_REPOSITORY } from '../../graphql/queries'\nimport { useParams } from 'react-router-native'\nimport ReviewItem from './ReviewItem'\nimport ItemSeparator from '../ItemSeparator'\n\nconst SingleRepo = () => {\n\n\tconst { id } = useParams()\n\t\n\tconst { data, fetchMore, loading } = useQuery(GET_SINGLE_REPOSITORY, {\n\t\tfetchPolicy: 'cache-and-network',\n\t\tvariables: {\n\t\t\trepositoryId: id\n\t\t}\n\t})\n\n\tif(!data){\n\t\treturn null\n\t}\n\n\tconst repoInfo = data.repository\n\n\tconst repoReviews = repoInfo.reviews.edges.map(e => e.node)\n\n\tconst handleOpenGithub = () => {\n\t\tLinking.openURL(repoInfo.url)\n\t}\n\n\tconst handleFetchMore = () => {\n\t\tif(!loading && repoInfo.pageInfo.hasNextPage){\n\t\t\tfetchMore({\n\t\t\t\tvariables: {\n\t\t\t\t\trepositoryId: id,\n\t\t\t\t\tafter: repoInfo.pageInfo.endCursor\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tconst repoItem = (\n\t\t<RepositoryItem\n\t\t\titem={repoInfo}\n\t\t\thandleOpenGithub={handleOpenGithub}\n\t\t\tsingleView\n\t\t/>\n\t)\n\n\n\treturn (\n\t\t<FlatList\n\t\t\tdata={repoReviews}\n\t\t\trenderItem={({ item }) => <ReviewItem review={item}/>}\n\t\t\tkeyExtractor={({ id }) => id}\n\t\t\tListHeaderComponent={repoItem}\n\t\t\tItemSeparatorComponent={ItemSeparator}\n\t\t\tonEndReached={handleFetchMore}\n\t\t\tonEndReachedThreshold={0.1}\n\t\t/>\n\t)\n\t\t\n}\n\nexport default SingleRepo"]},"metadata":{},"sourceType":"module"}